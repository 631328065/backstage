(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1c14af4"],{2532:function(t,e,a){"use strict";var r=a("23e7"),n=a("5a34"),o=a("1d80"),s=a("ab13");r({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(o(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,a){"use strict";var r=a("6eeb"),n=a("825a"),o=a("d039"),s=a("ad6d"),l="toString",u=RegExp.prototype,i=u[l],c=o((function(){return"/a/b"!=i.call({source:"a",flags:"b"})})),d=i.name!=l;(c||d)&&r(RegExp.prototype,l,(function(){var t=n(this),e=String(t.source),a=t.flags,r=String(void 0===a&&t instanceof RegExp&&!("flags"in u)?s.call(t):a);return"/"+e+"/"+r}),{unsafe:!0})},4020:function(t,e,a){"use strict";a("d3b7");var r=a("bc3a"),n=a.n(r),o=a("5c96"),s=a("a78e"),l=a.n(s),u="http://8.129.43.113:8080/",i=null,c=n.a.create({timeout:7e3,baseURL:u,method:"post",headers:{"Content-Type":"application/json;charset=UTF-8",Authorization:l.a.get("loginToken")}});c.interceptors.request.use((function(t){return i=o["Loading"].service({lock:!0,text:"拼命加载中..."}),t})),c.interceptors.response.use((function(t){return i.close(),t.data}),(function(t){console.log("TCL: error",t);var e=void 0!==t.Message?t.Message:"";return Object(o["Message"])({message:"网络错误"+e,type:"error",duration:3e3}),i.close(),Promise.reject(t)})),e["a"]=c},"44e7":function(t,e,a){var r=a("861d"),n=a("c6b6"),o=a("b622"),s=o("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==n(t))}},"5a34":function(t,e,a){var r=a("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},a8f7:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}));var r=a("4020");function n(){return Object(r["a"])({method:"get",url:"/brand/listAll"})}function o(t){return Object(r["a"])({method:"get",url:"/brand/list",params:t})}},ab13:function(t,e,a){var r=a("b622"),n=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[n]=!1,"/./"[t](e)}catch(r){}}return!1}},ad6d:function(t,e,a){"use strict";var r=a("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c1ce:function(t,e,a){},c437:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-box"},[a("div",{staticClass:"search"},[t._m(0),a("div",{staticClass:"search-content"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"140px"}},[a("el-form-item",{staticClass:"item",attrs:{label:"输入搜索：",prop:"keyword"}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1),a("el-form-item",{staticClass:"item",attrs:{label:"商品货号：",prop:"productSn"}},[a("el-input",{attrs:{placeholder:"商品货号"},model:{value:t.form.productSn,callback:function(e){t.$set(t.form,"productSn",e)},expression:"form.productSn"}})],1),a("el-form-item",{staticClass:"item",attrs:{label:"商品分类：",prop:"productCategoryId"}},[a("el-cascader",{attrs:{clearable:"",options:t.catOptions,props:{label:"name",value:"id"}},model:{value:t.form.productCategoryId,callback:function(e){t.$set(t.form,"productCategoryId",e)},expression:"form.productCategoryId"}})],1),a("el-form-item",{staticClass:"item",attrs:{label:"商品品牌：",prop:"brandId"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择品牌"},model:{value:t.form.brandId,callback:function(e){t.$set(t.form,"brandId",e)},expression:"form.brandId"}},t._l(t.brandList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{staticClass:"item",attrs:{label:"上架状态：",prop:"publishStatus"}},[a("el-select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.form.publishStatus,callback:function(e){t.$set(t.form,"publishStatus",e)},expression:"form.publishStatus"}},t._l(t.publishStatus,(function(t){return a("el-option",{key:t.status,attrs:{label:t.label,value:t.status}})})),1)],1),a("el-form-item",{staticClass:"item",attrs:{label:"审核状态：",clearable:"",prop:"verifyStatus"}},[a("el-select",{attrs:{placeholder:"全部"},model:{value:t.form.verifyStatus,callback:function(e){t.$set(t.form,"verifyStatus",e)},expression:"form.verifyStatus"}},t._l(t.verifyStatus,(function(t){return a("el-option",{key:t.status,attrs:{label:t.label,value:t.status}})})),1)],1),a("el-form-item",{staticClass:"formBtn"},[a("el-button",{attrs:{size:"small"},on:{click:t.reset}},[t._v("重置")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.querySearch}},[t._v("查询结果")])],1)],1)],1)]),a("div",{staticClass:"dataList"},[a("i",{staticClass:"el-icon-tickets"}),a("span",[t._v("数据列表")]),a("el-button",{attrs:{size:"mini"},on:{click:t.toProductAdd}},[t._v("添加")])],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableData,"tooltip-effect":"dark",border:""}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"40"}}),a("el-table-column",{attrs:{prop:"id",label:"编号",width:"100",align:"center"}}),a("el-table-column",{attrs:{label:"商品图片",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.pic,width:"80",height:"80"}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"262",align:"center"}}),a("el-table-column",{attrs:{label:"价格/货号",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("价格:"+t._s(e.row.price))]),a("p",[t._v("货号:"+t._s(e.row.productSn))])]}}])}),a("el-table-column",{attrs:{label:"标签",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"inactive-text":"上架:","active-value":1,"inactive-value":0},on:{change:function(a){return t.productPubStatus(e.row.id,e.row.publishStatus)}},model:{value:e.row.publishStatus,callback:function(a){t.$set(e.row,"publishStatus",a)},expression:"data.row.publishStatus"}}),a("el-switch",{attrs:{"inactive-text":"新品:","active-value":1,"inactive-value":0},on:{change:function(a){return t.newStatus(e.row.id,e.row.publishStatus)}},model:{value:e.row.newStatus,callback:function(a){t.$set(e.row,"newStatus",a)},expression:"data.row.newStatus"}}),a("el-switch",{attrs:{"inactive-text":"推荐:","active-value":1,"inactive-value":0},on:{change:function(a){return t.recommendStatus(e.row.id,e.row.publishStatus)}},model:{value:e.row.recommandStatus,callback:function(a){t.$set(e.row,"recommandStatus",a)},expression:"data.row.recommandStatus"}})]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"100",align:"center"}}),a("el-table-column",{attrs:{label:"SKU库存",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.openSkuEdit(e.row)}}})]}}])}),a("el-table-column",{attrs:{prop:"sale",label:"销量",width:"100",align:"center"}}),a("el-table-column",{attrs:{label:"审核状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(0==e.row.verifyStatus?"未审核":"已审核"))]),a("a",{staticClass:"details"},[t._v("审核详情")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",{staticClass:"operation"},[a("el-button",{attrs:{size:"mini"}},[t._v("查看")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.toUpdateProduct(e.row.id)}}},[t._v("编辑")])],1),a("p",{staticClass:"operation"},[a("el-button",{attrs:{size:"mini"}},[t._v("日志")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.delProduct(e.row.id)}}},[t._v("删除")])],1)]}}])})],1),a("el-dialog",{attrs:{title:"编辑货品信息",visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("商品货号：")]),a("span",[t._v(t._s(t.productSn))]),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"50%","margin-left":"10px"},attrs:{placeholder:"按SKU编号搜索",size:"small"},model:{value:t.skuCode,callback:function(e){t.skuCode=e},expression:"skuCode"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.skuDataFilter,border:""}},[a("el-table-column",{attrs:{label:"SKU编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.skuCode,callback:function(a){t.$set(e.row,"skuCode",a)},expression:"data.row.skuCode"}})]}}])}),t.skuData.length>0?[t._l(JSON.parse(t.skuData[0].spData),(function(e,r){return[a("el-table-column",{key:r,attrs:{label:e.key},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(JSON.parse(e.row.spData)[r].value)+" ")]}}],null,!0)})]}))]:t._e(),a("el-table-column",{attrs:{label:"销售价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.price,callback:function(a){t.$set(e.row,"price",a)},expression:"data.row.price"}})]}}])}),a("el-table-column",{attrs:{label:"商品库存"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.stock,callback:function(a){t.$set(e.row,"stock",a)},expression:"data.row.stock"}})]}}])}),a("el-table-column",{attrs:{label:"库存预警值"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.lowStock,callback:function(a){t.$set(e.row,"lowStock",a)},expression:"data.row.lowStock"}})]}}])})],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.skuEdit}},[t._v("确 定")])],1)],1),a("div",{staticClass:"batch"},[a("el-select",{staticStyle:{"min-width":"209px","margin-top":"20px"},attrs:{placeholder:"批量操作",size:"small"},model:{value:t.batch,callback:function(e){t.batch=e},expression:"batch"}},t._l(t.batchArr,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"}},[t._v("确定")])],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.form.pageNum,"page-sizes":[5,10,15],"page-size":11,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-title"},[a("i",{staticClass:"el-icon-search"}),t._v(" 筛选搜索 ")])}],o=(a("4de4"),a("caad"),a("d3b7"),a("25f0"),a("2532"),a("c4c8")),s=a("4020");function l(t,e){return Object(s["a"])({method:"get",url:"/sku/".concat(t),params:e})}function u(t,e){return Object(s["a"])({url:"/sku/update/".concat(t),data:e})}var i=a("f33f"),c=a("a8f7"),d={data:function(){return{form:{brandId:"",keyword:"",pageNum:1,pageSize:5,productCategoryId:"",productSn:"",publishStatus:"",verifyStatus:""},catOptions:[],tableData:[],dialogVisible:!1,brandList:[],publishStatus:[{label:"上架",status:1},{label:"下架",status:0}],verifyStatus:[{label:"已审核",status:1},{label:"未审核",status:0}],skuData:[],productSn:"",pid:"",skuCode:"",total:0,batch:"",batchArr:[{value:"选项1",label:"商品上架"}]}},computed:{skuDataFilter:function(){var t=this;return this.skuData.filter((function(e){return""==t.skuCode?e:e.skuCode.toString().includes(t.skuCode)}))}},mounted:function(){var t=this;this.querySearch(),Object(i["a"])().then((function(e){200==e.code&&(t.catOptions=e.data)})),Object(c["a"])().then((function(e){200==e.code&&(t.brandList=e.data)}))},methods:{querySearch:function(){var t=this;Object(o["b"])(this.form).then((function(e){t.tableData=e.data.list,t.total=e.data.total}))},reset:function(){this.$refs["form"].resetFields()},toProductAdd:function(){this.$router.push("/product/add")},productPubStatus:function(t,e){var a=this;Object(o["g"])({ids:t,publishStatus:e}).then((function(t){200==t.code&&a.$message({message:"修改成功",type:"success"})}))},newStatus:function(t,e){var a=this;Object(o["f"])({ids:t,newStatus:e}).then((function(t){200==t.code&&a.$message({message:"修改成功",type:"success"})}))},recommendStatus:function(t,e){var a=this;Object(o["h"])({ids:t,recommendStatus:e}).then((function(t){200==t.code&&a.$message({message:"修改成功",type:"success"})}))},toUpdateProduct:function(t){this.$router.push({path:"/product/add",query:{pid:t}})},delProduct:function(t){var e=this;Object(o["e"])({deleteStatus:1,ids:t}).then((function(t){200==t.code&&(e.$message({message:"删除成功",type:"success"}),e.querySearch())}))},openSkuEdit:function(t){var e=this;l(t.id,{keyword:null}).then((function(a){e.skuData=a.data,e.dialogVisible=!0,e.productSn=t.productSn,e.pid=t.id}))},skuEdit:function(){var t=this,e=JSON.parse(JSON.stringify(this.skuData));u(this.pid,e).then((function(e){200==e.code&&(t.dialogVisible=!1,t.$message({message:"sku库存修改成功",type:"success"}),t.skuCode="")}))},handleSizeChange:function(t){this.form.pageSize=t,this.querySearch()},handleCurrentChange:function(t){this.form.pageNum=t,this.querySearch()}}},p=d,f=(a("d47c"),a("2877")),b=Object(f["a"])(p,r,n,!1,null,null,null);e["default"]=b.exports},c4c8:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"g",(function(){return o})),a.d(e,"f",(function(){return s})),a.d(e,"h",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"j",(function(){return i})),a.d(e,"i",(function(){return c})),a.d(e,"e",(function(){return d})),a.d(e,"c",(function(){return p})),a.d(e,"a",(function(){return f}));var r=a("4020");function n(t){return Object(r["a"])({method:"GET",url:"/product/list",params:t})}function o(t){return Object(r["a"])({url:"/product/update/publishStatus",params:t})}function s(t){return Object(r["a"])({url:"product/update/newStatus",params:t})}function l(t){return Object(r["a"])({url:"/product/update/recommendStatus",params:t})}function u(t){return Object(r["a"])({url:"/product/create",data:t})}function i(t){return Object(r["a"])({method:"get",url:"/product/updateInfo/".concat(t)})}function c(t,e){return Object(r["a"])({url:"/product/update/".concat(t),data:e})}function d(t){return Object(r["a"])({url:"/product/update/deleteStatus",params:t})}function p(t){return Object(r["a"])({method:"get",url:"/subject/listAll"})}function f(){return Object(r["a"])({method:"get",url:"/prefrenceArea/listAll"})}},caad:function(t,e,a){"use strict";var r=a("23e7"),n=a("4d64").includes,o=a("44d2"),s=a("ae40"),l=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!l},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},d47c:function(t,e,a){"use strict";a("c1ce")},f33f:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return s}));var r=a("4020");function n(t){return Object(r["a"])({url:"/productCategory/create",data:t})}function o(){return Object(r["a"])({method:"get",url:"/productCategory/list/withChildren"})}function s(t){return Object(r["a"])({method:"get",url:"/productCategory/list/".concat(t)})}}}]);
//# sourceMappingURL=chunk-a1c14af4.b6e72f71.js.map